<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
    <title>Pace Calculator - Running Pace & Speed Calculator | ZenCalcs</title>
    <meta name="description" content="Free pace calculator for runners. Calculate pace, time, distance, and speed with split times. Includes presets for 5K, 10K, half and full marathon.">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMJ87N3YC3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YMJ87N3YC3');
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        /* Typography */
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #F8F9FA; min-height: 100vh; color: #2D3748; }

        /* Navigation */
        .navbar { background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); padding: 15px 30px; position: sticky; top: 0; z-index: 1000; }
        .nav-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { height: 40px; width: auto; }
        .nav-right { display: flex; gap: 20px; align-items: center; }
        .search-box { display: flex; align-items: center; background: #FFFFFF; border: 1px solid #E5E7EB; border-radius: 8px; padding: 8px 16px; min-width: 250px; transition: all 0.3s ease; }
        .search-box:hover { border-color: #2C5F6F; }
        .search-box:focus-within { border-color: #2C5F6F; box-shadow: 0 0 0 3px rgba(44, 95, 111, 0.1); }
        .search-box svg { width: 20px; height: 20px; color: #6B7280; margin-right: 10px; }
        .search-box input { border: none; outline: none; background: transparent; flex: 1; color: #2D3748; font-size: 0.95em; }
        .search-box input::placeholder { color: #D1D5DB; }
        .hamburger { display: flex; flex-direction: column; gap: 5px; cursor: pointer; padding: 5px; }
        .hamburger span { width: 28px; height: 3px; background: #2C5F6F; border-radius: 3px; transition: all 0.3s ease; }
        .hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(8px, 8px); }
        .hamburger.active span:nth-child(2) { opacity: 0; }
        .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }
        .mobile-menu { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0,0,0,0.5); z-index: 999; }
        .mobile-menu.active { display: block; }
        .mobile-menu-content { position: fixed; top: 0; right: -350px; width: 320px; height: 100vh; background: white; box-shadow: -2px 0 10px rgba(0,0,0,0.1); transition: right 0.3s ease; padding: 80px 20px 20px 20px; overflow-y: auto; }
        .mobile-menu.active .mobile-menu-content { right: 0; }
        .search-container { padding: 10px 15px 20px; }
        .search-input { width: 100%; padding: 12px 15px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 1em; }
        .search-input:focus { outline: none; border-color: #2C5F6F; box-shadow: 0 0 0 3px rgba(44, 95, 111, 0.1); }
        .category-header { font-size: 0.9em; font-weight: 700; color: #6B7280; padding: 15px 20px 10px; text-transform: uppercase; letter-spacing: 1px; }
        .category-divider { height: 1px; background: #E5E7EB; margin: 10px 0; }
        .mobile-menu-item { padding: 14px 20px; margin-bottom: 5px; background: #F8F9FA; border-radius: 8px; font-size: 0.95em; font-weight: 500; color: #2C5F6F; text-decoration: none; display: block; transition: all 0.3s ease; border-left: 4px solid transparent; }
        .mobile-menu-item:hover { background: #E0F2F1; border-left-color: #2C5F6F; transform: translateX(-5px); }
        .mobile-menu-item.placeholder { opacity: 0.5; cursor: not-allowed; }
        .mobile-menu-item.placeholder:hover { transform: none; }

        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        .calculator-section { background: white; border-radius: 15px; padding: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .calculator-section h1 { color: #2D3748; margin-bottom: 10px; font-size: 2.2em; text-align: center; }
        .calc-subtitle { text-align: center; color: #6B7280; margin-bottom: 30px; font-size: 1.1em; }
        .description { background: #E0F2F1; padding: 25px; border-radius: 12px; margin-bottom: 30px; border-left: 5px solid #2C5F6F; }
        .description p { color: #4B5563; line-height: 1.8; font-size: 1.05em; }

        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; font-weight: 600; margin-bottom: 8px; color: #4B5563; font-size: 1em; }
        .input-group input, .input-group select { width: 100%; padding: 14px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 1em; transition: all 0.3s ease; }
        .input-group input:focus, .input-group select:focus { outline: none; border-color: #2C5F6F; box-shadow: 0 0 0 3px rgba(44, 95, 111, 0.1); }
        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .input-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
        .input-row-4 { display: grid; grid-template-columns: 2fr 1fr; gap: 15px; }

        .time-inputs { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
        .time-inputs input { text-align: center; }

        .preset-buttons { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .preset-btn { padding: 15px 20px; background: #F8F9FA; color: #2C5F6F; border: 2px solid #2C5F6F; border-radius: 8px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .preset-btn:hover { background: #2C5F6F; color: white; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(44, 95, 111, 0.3); }

        .calculate-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, #E89B6F 0%, #F4A460 100%); color: white; border: none; border-radius: 10px; font-size: 1.2em; font-weight: 700; cursor: pointer; transition: all 0.3s ease; margin-top: 25px; box-shadow: 0 4px 15px rgba(232, 155, 111, 0.4); }
        .calculate-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(232, 155, 111, 0.5); }

        .result-section { margin-top: 40px; display: none; }
        .key-insight { background: linear-gradient(135deg, #2C5F6F 0%, #1F4A56 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(44, 95, 111, 0.3); }
        .key-insight h3 { font-size: 1.5em; margin-bottom: 15px; }
        .key-insight p, .key-insight ul { font-size: 1.1em; line-height: 1.8; opacity: 0.95; }
        .key-insight ul { margin-top: 15px; padding-left: 25px; }
        .key-insight li { margin-bottom: 10px; }

        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .metric-card { background: #F8F9FA; padding: 25px; border-radius: 12px; border-left: 5px solid #2C5F6F; transition: all 0.3s ease; }
        .metric-card:hover { transform: translateY(-3px); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .metric-label { font-size: 0.95em; color: #6B7280; margin-bottom: 10px; font-weight: 600; }
        .metric-value { font-size: 2em; font-weight: 700; color: #2C5F6F; word-break: break-word; }

        .chart-container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); margin-bottom: 30px; position: relative; height: 400px; }

        .splits-table { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); margin-bottom: 30px; overflow-x: auto; }
        .splits-table h3 { color: #2D3748; margin-bottom: 20px; font-size: 1.4em; }
        table { width: 100%; border-collapse: collapse; }
        thead { background: #2C5F6F; color: white; }
        th { padding: 15px; text-align: left; font-weight: 600; }
        td { padding: 12px 15px; border-bottom: 1px solid #E5E7EB; }
        tbody tr:hover { background: #F8F9FA; }

        @media (max-width: 768px) {
            .navbar { padding: 10px 15px; }
            .logo { height: 32px; }
            .nav-right { gap: 10px; }
            .search-box { min-width: 50px; padding: 6px 8px; }
            .search-box svg { width: 16px; height: 16px; margin-right: 4px; }
            .search-box input { font-size: 0.8em; }
            .calculator-section { padding: 25px; }
            .chart-container { height: 300px; padding: 20px; }
            .input-row, .input-row-3, .input-row-4 { grid-template-columns: 1fr; }
            .mobile-menu-content { width: 280px; right: -280px; }
            .hamburger { margin-left: 5px; padding: 3px; }
            .hamburger span { width: 24px; }
            .preset-buttons { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 400px) {
            .navbar { padding: 8px 12px; }
            .logo { height: 28px; }
            .nav-right { gap: 8px; }
            .search-box { min-width: 40px; padding: 5px 6px; }
            .hamburger span { width: 22px; }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">
                <img src="50F4465B-4D0A-459B-AAD8-B367AAEEF636.jpg" alt="ZenCalcs Logo" class="logo">
            </a>
            <div class="nav-right">
                <div class="search-box" onclick="openSearchInMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <input type="text" placeholder="Search Calculator" readonly onclick="openSearchInMenu()">
                </div>
                <div class="hamburger" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <div class="mobile-menu" id="mobileMenu" onclick="closeMobileMenu()">
        <div class="mobile-menu-content" onclick="event.stopPropagation()">
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Search calculators..." onkeyup="filterCalculators()">
            </div>
            <div class="category-header">Financial</div>
            <a href="mortgage-calculator.html" class="mobile-menu-item">Mortgage Calculator</a>
            <a href="loan-calculator.html" class="mobile-menu-item">Loan Calculator</a>
            <a href="auto-loan-calculator.html" class="mobile-menu-item">Auto Loan Calculator</a>
            <a href="compound-interest.html" class="mobile-menu-item">Savings Calculator</a>
            <a href="payment-calculator.html" class="mobile-menu-item">Payment Calculator</a>
            <a href="retirement-calculator.html" class="mobile-menu-item">Retirement Calculator</a>
            <a href="amortization-calculator.html" class="mobile-menu-item">Amortization Calculator</a>
            <a href="investment-calculator.html" class="mobile-menu-item">Investment Calculator</a>
            <a href="inflation-calculator.html" class="mobile-menu-item">Inflation Calculator</a>
            <a href="roi-calculator.html" class="mobile-menu-item">ROI Calculator</a>
            <a href="savings-calculator.html" class="mobile-menu-item">Income Tax Calculator</a>
            <div class="category-divider"></div>
            <div class="category-header">Fitness & Health</div>
            <a href="bmi-calculator.html" class="mobile-menu-item">BMI Calculator</a>
            <a href="calorie-calculator.html" class="mobile-menu-item">Calorie Calculator</a>
            <a href="body-fat-calculator.html" class="mobile-menu-item">Body Fat Calculator</a>
            <a href="bmr-calculator.html" class="mobile-menu-item">BMR Calculator</a>
            <a href="ideal-weight-calculator.html" class="mobile-menu-item">Ideal Weight Calculator</a>
            <a href="pace-calculator.html" class="mobile-menu-item">Pace Calculator</a>
            <a href="pregnancy-calculator.html" class="mobile-menu-item">Pregnancy Calculator</a>
            <a href="due-date-calculator.html" class="mobile-menu-item">Due Date Calculator</a>
            <a href="macro-calculator.html" class="mobile-menu-item">Macro Calculator</a>
            <a href="body-type-calculator.html" class="mobile-menu-item">Body Type Calculator</a>
            <div class="category-divider"></div>
            <div class="category-header">Math</div>
            <a href="scientific-calculator.html" class="mobile-menu-item">Scientific Calculator</a>
            <a href="fraction-calculator.html" class="mobile-menu-item">Fraction Calculator</a>
            <a href="percentage-calculator.html" class="mobile-menu-item">Percentage Calculator</a>
            <a href="random-number-generator.html" class="mobile-menu-item">Random Number Generator</a>
            <a href="triangle-calculator.html" class="mobile-menu-item">Triangle Calculator</a>
            <a href="standard-deviation-calculator.html" class="mobile-menu-item">Standard Deviation Calculator</a>
            <a href="square-root-calculator.html" class="mobile-menu-item">Square Root Calculator</a>
            <a href="exponent-calculator.html" class="mobile-menu-item">Exponent Calculator</a>
            <a href="log-calculator.html" class="mobile-menu-item">Log Calculator</a>
            <a href="algebra-calculator.html" class="mobile-menu-item">Algebra Calculator</a>
            <div class="category-divider"></div>
            <div class="category-header">Other</div>
            <a href="#" class="mobile-menu-item placeholder">Age Calculator</a>
            <a href="#" class="mobile-menu-item placeholder">Date Calculator</a>
            <a href="#" class="mobile-menu-item placeholder">Time Calculator</a>
            <a href="#" class="mobile-menu-item placeholder">Hours Calculator</a>
            <a href="#" class="mobile-menu-item placeholder">GPA Calculator</a>
            <a href="#" class="mobile-menu-item placeholder">Grade Calculator</a>
            <a href="#" class="mobile-menu-item placeholder">Concrete Calculator</a>
            <a href="#" class="mobile-menu-item placeholder">Password Generator</a>
            <a href="#" class="mobile-menu-item placeholder">Conversion Calculator</a>
            <a href="salary-calculator.html" class="mobile-menu-item">Salary Calculator</a>
        </div>
    </div>

    <div class="container">
        <div class="calculator-section">
            <h1>Pace Calculator</h1>
            <p class="calc-subtitle">Calculate running pace, time, distance, and speed with split times</p>

            <div class="description">
                <p>Use this pace calculator to determine your running pace, finish time, or race distance. Perfect for training plans and race preparation. Calculate splits for any distance including 5K, 10K, half marathon, and full marathon.</p>
            </div>

            <div class="input-group">
                <label>What do you want to calculate?</label>
                <select id="calculateType" onchange="toggleInputs()">
                    <option value="time">Time</option>
                    <option value="distance">Distance</option>
                    <option value="pace">Pace</option>
                </select>
            </div>

            <div id="presetSection">
                <label style="display: block; font-weight: 600; margin-bottom: 12px; color: #4B5563; font-size: 1em;">Quick Race Distances:</label>
                <div class="preset-buttons">
                    <button class="preset-btn" onclick="setPresetDistance(5, 'kilometers')">5K</button>
                    <button class="preset-btn" onclick="setPresetDistance(10, 'kilometers')">10K</button>
                    <button class="preset-btn" onclick="setPresetDistance(13.1, 'miles')">Half Marathon</button>
                    <button class="preset-btn" onclick="setPresetDistance(26.2, 'miles')">Marathon</button>
                </div>
            </div>

            <div id="timeInputSection">
                <div class="input-group">
                    <label>Time</label>
                    <div class="time-inputs">
                        <div>
                            <input type="number" id="timeHours" value="0" min="0" max="23" placeholder="HH">
                            <div style="text-align: center; font-size: 0.85em; color: #6B7280; margin-top: 5px;">Hours</div>
                        </div>
                        <div>
                            <input type="number" id="timeMinutes" value="30" min="0" max="59" placeholder="MM">
                            <div style="text-align: center; font-size: 0.85em; color: #6B7280; margin-top: 5px;">Minutes</div>
                        </div>
                        <div>
                            <input type="number" id="timeSeconds" value="0" min="0" max="59" placeholder="SS">
                            <div style="text-align: center; font-size: 0.85em; color: #6B7280; margin-top: 5px;">Seconds</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="distanceInputSection">
                <div class="input-row-4">
                    <div class="input-group">
                        <label>Distance</label>
                        <input type="number" id="distance" value="5" min="0.01" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Unit</label>
                        <select id="distanceUnit">
                            <option value="miles">Miles</option>
                            <option value="kilometers">Kilometers</option>
                            <option value="meters">Meters</option>
                            <option value="yards">Yards</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="paceInputSection">
                <div class="input-row-4">
                    <div class="input-group">
                        <label>Pace</label>
                        <div class="time-inputs" style="grid-template-columns: 1fr 1fr;">
                            <div>
                                <input type="number" id="paceMinutes" value="8" min="0" max="59" placeholder="MM">
                                <div style="text-align: center; font-size: 0.85em; color: #6B7280; margin-top: 5px;">Minutes</div>
                            </div>
                            <div>
                                <input type="number" id="paceSeconds" value="0" min="0" max="59" placeholder="SS">
                                <div style="text-align: center; font-size: 0.85em; color: #6B7280; margin-top: 5px;">Seconds</div>
                            </div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Per</label>
                        <select id="paceUnit">
                            <option value="mile">Per Mile</option>
                            <option value="kilometer">Per Kilometer</option>
                        </select>
                    </div>
                </div>
            </div>

            <button class="calculate-btn" onclick="calculatePace()">Calculate</button>
            <div class="result-section" id="result"></div>
        </div>
    </div>

    <script>
        let paceChartInstance = null;
        let splitsChartInstance = null;

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        function closeMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.remove('active');
            hamburger.classList.remove('active');
        }

        function openSearchInMenu() {
            const menu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.add('active');
            hamburger.classList.add('active');
            setTimeout(() => {
                document.getElementById('searchInput').focus();
            }, 300);
        }

        function filterCalculators() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const items = document.querySelectorAll('.mobile-menu-item');
            const headers = document.querySelectorAll('.category-header');
            const dividers = document.querySelectorAll('.category-divider');

            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });

            if (searchTerm) {
                headers.forEach(header => header.style.display = 'none');
                dividers.forEach(divider => divider.style.display = 'none');
            } else {
                headers.forEach(header => header.style.display = 'block');
                dividers.forEach(divider => divider.style.display = 'block');
            }
        }

        function toggleInputs() {
            const calculateType = document.getElementById('calculateType').value;
            const timeSection = document.getElementById('timeInputSection');
            const distanceSection = document.getElementById('distanceInputSection');
            const paceSection = document.getElementById('paceInputSection');
            const presetSection = document.getElementById('presetSection');

            // Hide all first
            timeSection.style.display = 'none';
            distanceSection.style.display = 'none';
            paceSection.style.display = 'none';
            presetSection.style.display = 'none';

            // Show the ones we need
            if (calculateType === 'time') {
                distanceSection.style.display = 'block';
                paceSection.style.display = 'block';
                presetSection.style.display = 'block';
            } else if (calculateType === 'distance') {
                timeSection.style.display = 'block';
                paceSection.style.display = 'block';
            } else if (calculateType === 'pace') {
                timeSection.style.display = 'block';
                distanceSection.style.display = 'block';
                presetSection.style.display = 'block';
            }
        }

        function setPresetDistance(distance, unit) {
            document.getElementById('distance').value = distance;
            document.getElementById('distanceUnit').value = unit;
        }

        function convertToMiles(distance, unit) {
            const conversions = {
                'miles': 1,
                'kilometers': 0.621371,
                'meters': 0.000621371,
                'yards': 0.000568182
            };
            return distance * conversions[unit];
        }

        function convertToKm(distance, unit) {
            const conversions = {
                'miles': 1.60934,
                'kilometers': 1,
                'meters': 0.001,
                'yards': 0.0009144
            };
            return distance * conversions[unit];
        }

        function formatTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = Math.round(totalSeconds % 60);

            const hh = String(hours).padStart(2, '0');
            const mm = String(minutes).padStart(2, '0');
            const ss = String(seconds).padStart(2, '0');

            return `${hh}:${mm}:${ss}`;
        }

        function formatPace(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = Math.round(totalSeconds % 60);
            return `${minutes}:${String(seconds).padStart(2, '0')}`;
        }

        function calculatePace() {
            const calculateType = document.getElementById('calculateType').value;

            let timeSeconds, distanceMiles, distanceKm, distanceValue, distanceUnit;
            let pacePerMile, pacePerKm;

            if (calculateType === 'time') {
                // Calculate Time from Distance and Pace
                distanceValue = parseFloat(document.getElementById('distance').value);
                distanceUnit = document.getElementById('distanceUnit').value;
                distanceMiles = convertToMiles(distanceValue, distanceUnit);
                distanceKm = convertToKm(distanceValue, distanceUnit);

                const paceMin = parseFloat(document.getElementById('paceMinutes').value) || 0;
                const paceSec = parseFloat(document.getElementById('paceSeconds').value) || 0;
                const paceUnitValue = document.getElementById('paceUnit').value;
                const paceSeconds = (paceMin * 60) + paceSec;

                if (paceUnitValue === 'mile') {
                    pacePerMile = paceSeconds;
                    pacePerKm = paceSeconds / 1.60934;
                } else {
                    pacePerKm = paceSeconds;
                    pacePerMile = paceSeconds * 1.60934;
                }

                timeSeconds = distanceMiles * pacePerMile;

            } else if (calculateType === 'distance') {
                // Calculate Distance from Time and Pace
                const hours = parseFloat(document.getElementById('timeHours').value) || 0;
                const minutes = parseFloat(document.getElementById('timeMinutes').value) || 0;
                const seconds = parseFloat(document.getElementById('timeSeconds').value) || 0;
                timeSeconds = (hours * 3600) + (minutes * 60) + seconds;

                const paceMin = parseFloat(document.getElementById('paceMinutes').value) || 0;
                const paceSec = parseFloat(document.getElementById('paceSeconds').value) || 0;
                const paceUnitValue = document.getElementById('paceUnit').value;
                const paceSeconds = (paceMin * 60) + paceSec;

                if (paceSeconds === 0) {
                    alert('Pace cannot be zero');
                    return;
                }

                if (paceUnitValue === 'mile') {
                    pacePerMile = paceSeconds;
                    pacePerKm = paceSeconds / 1.60934;
                    distanceMiles = timeSeconds / pacePerMile;
                } else {
                    pacePerKm = paceSeconds;
                    pacePerMile = paceSeconds * 1.60934;
                    distanceKm = timeSeconds / pacePerKm;
                    distanceMiles = distanceKm * 0.621371;
                }

                distanceKm = distanceMiles * 1.60934;
                distanceUnit = 'miles';
                distanceValue = distanceMiles;

            } else if (calculateType === 'pace') {
                // Calculate Pace from Time and Distance
                const hours = parseFloat(document.getElementById('timeHours').value) || 0;
                const minutes = parseFloat(document.getElementById('timeMinutes').value) || 0;
                const seconds = parseFloat(document.getElementById('timeSeconds').value) || 0;
                timeSeconds = (hours * 3600) + (minutes * 60) + seconds;

                distanceValue = parseFloat(document.getElementById('distance').value);
                distanceUnit = document.getElementById('distanceUnit').value;
                distanceMiles = convertToMiles(distanceValue, distanceUnit);
                distanceKm = convertToKm(distanceValue, distanceUnit);

                if (distanceMiles === 0) {
                    alert('Distance cannot be zero');
                    return;
                }

                pacePerMile = timeSeconds / distanceMiles;
                pacePerKm = timeSeconds / distanceKm;
            }

            // Calculate speed
            const speedMph = (distanceMiles / (timeSeconds / 3600));
            const speedKmh = (distanceKm / (timeSeconds / 3600));

            // Calculate calories (approximately 100 cal per mile for running)
            const calories = Math.round(distanceMiles * 100);

            // Generate results
            displayResults({
                calculateType,
                timeSeconds,
                distanceMiles,
                distanceKm,
                distanceValue,
                distanceUnit,
                pacePerMile,
                pacePerKm,
                speedMph,
                speedKmh,
                calories
            });
        }

        function displayResults(data) {
            const {calculateType, timeSeconds, distanceMiles, distanceKm, distanceValue, distanceUnit,
                   pacePerMile, pacePerKm, speedMph, speedKmh, calories} = data;

            let calculatedValue = '';
            if (calculateType === 'time') {
                calculatedValue = `Time: ${formatTime(timeSeconds)}`;
            } else if (calculateType === 'distance') {
                calculatedValue = `Distance: ${distanceMiles.toFixed(2)} miles (${distanceKm.toFixed(2)} km)`;
            } else if (calculateType === 'pace') {
                calculatedValue = `Pace: ${formatPace(pacePerMile)} per mile (${formatPace(pacePerKm)} per km)`;
            }

            const resultHTML = `
                <div class="key-insight">
                    <h3>${calculatedValue}</h3>
                    <p><strong>Total Time:</strong> ${formatTime(timeSeconds)}</p>
                    <p><strong>Distance:</strong> ${distanceMiles.toFixed(2)} miles (${distanceKm.toFixed(2)} km)</p>
                    <p><strong>Average Pace:</strong> ${formatPace(pacePerMile)} per mile | ${formatPace(pacePerKm)} per km</p>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Time</div>
                        <div class="metric-value">${formatTime(timeSeconds)}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Distance</div>
                        <div class="metric-value">${distanceMiles.toFixed(2)} mi</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Pace (per mile)</div>
                        <div class="metric-value">${formatPace(pacePerMile)}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Pace (per km)</div>
                        <div class="metric-value">${formatPace(pacePerKm)}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Speed (mph)</div>
                        <div class="metric-value">${speedMph.toFixed(2)}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Speed (km/h)</div>
                        <div class="metric-value">${speedKmh.toFixed(2)}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Calories Burned</div>
                        <div class="metric-value">${calories}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Distance (km)</div>
                        <div class="metric-value">${distanceKm.toFixed(2)}</div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="paceChart"></canvas>
                </div>

                <div class="chart-container">
                    <canvas id="splitsChart"></canvas>
                </div>

                ${generateSplitsTable(distanceMiles, distanceKm, pacePerMile, pacePerKm)}
            `;

            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = resultHTML;
            resultDiv.style.display = 'block';

            // Smooth scroll to results
            setTimeout(() => {
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);

            // Create charts
            createPaceComparisonChart(pacePerMile);
            createSplitsChart(distanceMiles, pacePerMile);
        }

        function generateSplitsTable(distanceMiles, distanceKm, pacePerMile, pacePerKm) {
            const useMiles = distanceMiles >= 1;
            const splits = [];

            if (useMiles) {
                const numMiles = Math.floor(distanceMiles);
                for (let i = 1; i <= numMiles; i++) {
                    const splitTime = i * pacePerMile;
                    splits.push({
                        label: `Mile ${i}`,
                        split: formatTime(splitTime),
                        pace: formatPace(pacePerMile)
                    });
                }

                // Add partial mile if exists
                const remaining = distanceMiles - numMiles;
                if (remaining > 0.01) {
                    const splitTime = distanceMiles * pacePerMile;
                    splits.push({
                        label: `Mile ${numMiles + 1} (${remaining.toFixed(2)} mi)`,
                        split: formatTime(splitTime),
                        pace: formatPace(pacePerMile)
                    });
                }
            } else {
                const numKm = Math.floor(distanceKm);
                for (let i = 1; i <= numKm; i++) {
                    const splitTime = i * pacePerKm;
                    splits.push({
                        label: `Kilometer ${i}`,
                        split: formatTime(splitTime),
                        pace: formatPace(pacePerKm)
                    });
                }

                // Add partial km if exists
                const remaining = distanceKm - numKm;
                if (remaining > 0.01) {
                    const splitTime = distanceKm * pacePerKm;
                    splits.push({
                        label: `Kilometer ${numKm + 1} (${remaining.toFixed(2)} km)`,
                        split: formatTime(splitTime),
                        pace: formatPace(pacePerKm)
                    });
                }
            }

            let tableHTML = `
                <div class="splits-table">
                    <h3>Split Times</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>${useMiles ? 'Mile' : 'Kilometer'}</th>
                                <th>Split Time (Cumulative)</th>
                                <th>Pace</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            splits.forEach(split => {
                tableHTML += `
                    <tr>
                        <td>${split.label}</td>
                        <td>${split.split}</td>
                        <td>${split.pace}</td>
                    </tr>
                `;
            });

            tableHTML += `
                        </tbody>
                    </table>
                </div>
            `;

            return tableHTML;
        }

        function createPaceComparisonChart(pacePerMile) {
            if (paceChartInstance) {
                paceChartInstance.destroy();
            }

            const distances = [3.1, 6.2, 13.1, 26.2]; // miles
            const times = distances.map(d => d * pacePerMile / 60); // convert to minutes

            const ctx = document.getElementById('paceChart').getContext('2d');
            paceChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['5K', '10K', 'Half Marathon', 'Marathon'],
                    datasets: [{
                        label: 'Finish Time (minutes)',
                        data: times,
                        backgroundColor: ['#2C5F6F', '#3E7C8F', '#5FA8D3', '#E89B6F'],
                        borderWidth: 0,
                        barPercentage: 0.8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Race Time Predictions at Current Pace',
                            font: { size: 16, weight: 'bold' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const minutes = context.parsed.y;
                                    return 'Time: ' + formatTime(minutes * 60);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Time (minutes)'
                            }
                        }
                    }
                }
            });
        }

        function createSplitsChart(distanceMiles, pacePerMile) {
            if (splitsChartInstance) {
                splitsChartInstance.destroy();
            }

            const numSplits = Math.ceil(distanceMiles);
            const labels = [];
            const data = [];

            for (let i = 1; i <= numSplits; i++) {
                labels.push(`Mile ${i}`);
                data.push(i * pacePerMile / 60); // convert to minutes
            }

            const ctx = document.getElementById('splitsChart').getContext('2d');
            splitsChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Cumulative Time (minutes)',
                        data: data,
                        backgroundColor: 'rgba(44, 95, 111, 0.2)',
                        borderColor: '#2C5F6F',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.1,
                        pointBackgroundColor: '#E89B6F',
                        pointBorderColor: '#E89B6F',
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        title: {
                            display: true,
                            text: 'Split Times by Mile',
                            font: { size: 16, weight: 'bold' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const minutes = context.parsed.y;
                                    return 'Cumulative Time: ' + formatTime(minutes * 60);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Time (minutes)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Mile'
                            }
                        }
                    }
                }
            });
        }

        // Initialize on page load
        toggleInputs();
    </script>
    <!-- AI Chat Assistant -->
    <link rel="stylesheet" href="css/ai-chat.css">
    <script src="js/ai-chat.js"></script>
</body>
</html>
