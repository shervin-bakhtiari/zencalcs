<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
    <title>ZenCalcs - Professional Financial Calculator Suite | Free Tools with Charts</title>
    <meta name="description" content="Free professional financial calculators with interactive charts and insights. Mortgage, loan, investment, retirement, and salary calculators. No signup required.">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMJ87N3YC3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YMJ87N3YC3');
    </script>
    
    <style>
        /* Typography */
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #F8F9FA; min-height: 100vh; color: #1E293B; }
        
        /* Navigation */
        .navbar { background: #FFFFFF; box-shadow: 0 2px 10px rgba(0,0,0,0.1); padding: 15px 30px; position: sticky; top: 0; z-index: 1000; }
        .nav-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { height: 40px; width: auto; }
        .nav-right { display: flex; gap: 20px; align-items: center; }

        /* Search Box */
        .search-box { display: flex; align-items: center; background: #FFFFFF; border: 1px solid #E5E7EB; border-radius: 8px; padding: 8px 16px; min-width: 250px; transition: all 0.3s ease; }
        .search-box:hover { border-color: #2C5F6F; }
        .search-box:focus-within { border-color: #2C5F6F; box-shadow: 0 0 0 3px rgba(44, 95, 111, 0.1); }
        .search-box svg { width: 20px; height: 20px; color: #6B7280; margin-right: 10px; }
        .search-box input { border: none; outline: none; background: transparent; flex: 1; color: #2D3748; font-size: 0.95em; }
        .search-box input::placeholder { color: #D1D5DB; }

        /* Hamburger Menu */
        .hamburger { display: flex; flex-direction: column; gap: 5px; cursor: pointer; padding: 5px; }
        .hamburger span { width: 28px; height: 3px; background: #2C5F6F; border-radius: 3px; transition: all 0.3s ease; }
        .hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(8px, 8px); }
        .hamburger.active span:nth-child(2) { opacity: 0; }
        .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }

        /* Slide-out Menu */
        .mobile-menu { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0,0,0,0.5); z-index: 999; }
        .mobile-menu.active { display: block; }
        .mobile-menu-content { position: fixed; top: 0; right: -350px; width: 320px; height: 100vh; background: #FFFFFF; box-shadow: -2px 0 10px rgba(0,0,0,0.1); transition: right 0.3s ease; padding: 80px 20px 20px 20px; overflow-y: auto; }
        .mobile-menu.active .mobile-menu-content { right: 0; }

        /* Search Bar in Menu */
        .search-container { padding: 10px 15px 20px; }
        .search-input { width: 100%; padding: 12px 15px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 1em; color: #2D3748; }
        .search-input:focus { outline: none; border-color: #2C5F6F; box-shadow: 0 0 0 3px rgba(44, 95, 111, 0.1); }

        /* Category Headers */
        .category-header { font-size: 0.9em; font-weight: 700; color: #6B7280; padding: 15px 20px 10px; text-transform: uppercase; letter-spacing: 1px; }
        .category-divider { height: 1px; background: #E5E7EB; margin: 10px 0; }

        /* Menu Items */
        .mobile-menu-item { padding: 14px 20px; margin-bottom: 5px; background: #F8F9FA; border-radius: 8px; font-size: 0.95em; font-weight: 500; color: #2D3748; text-decoration: none; display: block; transition: all 0.3s ease; border-left: 4px solid transparent; }
        .mobile-menu-item:hover { background: #E0F2F1; border-left-color: #2C5F6F; transform: translateX(-5px); }
        .mobile-menu-item.placeholder { opacity: 0.5; cursor: not-allowed; }
        .mobile-menu-item.placeholder:hover { transform: none; background: #F8F9FA; }
        
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        
        /* Hero Section */
        .hero-section { background: linear-gradient(135deg, #2C5F6F 0%, #1E40AF 100%); border-radius: 20px; padding: 40px 40px; margin-bottom: 50px; box-shadow: 0 10px 40px rgba(44, 95, 111, 0.2); text-align: center; color: white; }
        .hero-section h1 { font-size: 3em; margin-bottom: 15px; text-shadow: 0 2px 4px rgba(0,0,0,0.1); font-weight: 800; }
        .hero-section .tagline { font-size: 1.3em; margin-bottom: 0; opacity: 0.95; font-weight: 300; }

        /* Calculator Grid */
        .calc-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px; }
        .calc-card { background: #FFFFFF; border-radius: 15px; padding: 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); transition: all 0.3s ease; text-decoration: none; color: inherit; border: 2px solid #E5E7EB; }
        .calc-card:hover { transform: translateY(-8px); box-shadow: 0 8px 30px rgba(44, 95, 111, 0.15); border-color: #2C5F6F; }
        .calc-card-icon { font-size: 3.5em; margin-bottom: 20px; color: #2C5F6F; }
        .calc-card h3 { color: #2D3748; font-size: 1.8em; margin-bottom: 15px; font-weight: 700; }
        .calc-card p { color: #6B7280; line-height: 1.8; margin-bottom: 20px; font-size: 1.05em; }
        .calc-card ul { list-style: none; padding: 0; margin-top: 20px; }
        .calc-card li { padding: 8px 0; color: #4B5563; font-size: 0.95em; padding-left: 25px; position: relative; }
        .calc-card li:before { content: "âœ“"; position: absolute; left: 0; color: #6B9080; font-weight: bold; }
        
        /* AI Chat Section on Landing Page */
        .ai-chat-section { background: #FFFFFF; border-radius: 20px; padding: 50px 40px; margin-bottom: 50px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 2px solid #E5E7EB; }
        .ai-chat-section h2 { text-align: center; color: #2D3748; font-size: 2.5em; margin-bottom: 15px; font-weight: 700; }
        .ai-chat-section .subtitle { text-align: center; color: #6B7280; font-size: 1.1em; margin-bottom: 40px; }
        .ai-chat-container { max-width: 900px; margin: 0 auto; display: flex; flex-direction: column; }

        /* Response Area - Scrollable chat history */
        .ai-chat-response-area { background: #F8F9FA; border-radius: 15px; padding: 30px; min-height: 300px; max-height: 500px; overflow-y: auto; margin-bottom: 20px; order: 1; }
        .ai-chat-response-area::-webkit-scrollbar { width: 8px; }
        .ai-chat-response-area::-webkit-scrollbar-track { background: #E5E7EB; border-radius: 4px; }
        .ai-chat-response-area::-webkit-scrollbar-thumb { background: #2C5F6F; border-radius: 4px; }
        .ai-chat-response-area::-webkit-scrollbar-thumb:hover { background: #1F4A56; }

        /* Messages */
        .ai-message { background: #FFFFFF; padding: 25px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #2C5F6F; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .ai-message.user { border-left-color: #6B7280; }
        .ai-message.error { border-left-color: #EF4444; }
        .ai-message-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .ai-message-header svg { width: 24px; height: 24px; color: #2C5F6F; }
        .ai-message-header h4 { margin: 0; color: #2D3748; font-size: 1.1em; }
        .ai-message-content { color: #4B5563; line-height: 1.8; font-size: 1.05em; }
        .ai-message-content strong { color: #2C5F6F; font-weight: 600; }

        /* Enhanced Message Formatting */
        .ai-message-content .message-heading { color: #2C5F6F; font-size: 1.3em; font-weight: 600; margin: 16px 0 8px 0; padding-bottom: 6px; border-bottom: 2px solid #E5E7EB; }
        .ai-message-content .message-heading:first-child { margin-top: 0; }
        .ai-message-content .message-subheading { color: #1E40AF; font-size: 1.1em; font-weight: 600; margin: 12px 0 6px 0; }
        .ai-message-content .message-bullet { padding-left: 8px; margin: 4px 0; line-height: 1.6; }
        .ai-message-content .message-numbered { padding-left: 24px; margin: 4px 0; line-height: 1.6; position: relative; counter-increment: message-counter; }
        .ai-message-content .message-numbered:before { content: counter(message-counter) ". "; position: absolute; left: 0; font-weight: 600; color: #2C5F6F; }

        /* Typing Indicator */
        .typing-indicator { display: flex; gap: 6px; align-items: center; }
        .typing-indicator span { width: 8px; height: 8px; border-radius: 50%; background: #2C5F6F; animation: typing-bounce 1.4s infinite ease-in-out; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing-bounce { 0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; } 40% { transform: scale(1); opacity: 1; } }

        /* Input Area */
        .ai-chat-input-area { display: flex; gap: 15px; margin-bottom: 15px; order: 2; }
        .ai-chat-input-area textarea { flex: 1; padding: 18px 20px; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 1em; font-family: 'Inter', sans-serif; resize: none; min-height: 60px; transition: all 0.3s; }
        .ai-chat-input-area textarea:focus { outline: none; border-color: #2C5F6F; box-shadow: 0 0 0 3px rgba(44, 95, 111, 0.1); }
        .ai-chat-input-area button { padding: 18px 35px; background: linear-gradient(135deg, #2C5F6F 0%, #1E40AF 100%); color: white; border: none; border-radius: 12px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s; white-space: nowrap; }
        .ai-chat-input-area button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(44, 95, 111, 0.3); }

        /* Action Buttons Area */
        .ai-chat-actions-area { display: flex; gap: 12px; order: 3; }
        .ai-action-btn { flex: 1; padding: 12px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.95em; display: flex; align-items: center; justify-content: center; gap: 8px; border: none; }
        .ai-action-btn.primary { background: linear-gradient(135deg, #2C5F6F 0%, #1E40AF 100%); color: white; }
        .ai-action-btn.primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(44, 95, 111, 0.3); }
        .ai-action-btn.secondary { background: #FFFFFF; border: 2px solid #2C5F6F; color: #2C5F6F; }
        .ai-action-btn.secondary:hover { background: #F8F9FA; transform: translateY(-2px); }

        /* Empty State */
        .ai-empty-state { text-align: center; padding: 60px 20px; color: #9CA3AF; }
        .ai-empty-state svg { width: 80px; height: 80px; margin-bottom: 20px; opacity: 0.3; }
        .ai-empty-state h3 { color: #6B7280; font-size: 1.3em; margin-bottom: 10px; }
        .ai-empty-state p { font-size: 1em; }

        /* Features Section */
        .features-section { background: #FFFFFF; border-radius: 20px; padding: 60px 40px; margin-bottom: 50px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); border: 1px solid #E5E7EB; }
        .features-section h2 { text-align: center; color: #2D3748; font-size: 2.5em; margin-bottom: 50px; font-weight: 700; }

        /* Hero Feature Card - AI Powered */
        .hero-feature-container { margin-bottom: 60px; }
        .hero-feature { background: linear-gradient(135deg, #2C5F6F 0%, #1E40AF 100%); padding: 50px 40px; border-radius: 20px; color: white; box-shadow: 0 10px 40px rgba(44, 95, 111, 0.3); text-align: center; transition: all 0.3s ease; grid-column: 1 / -1; }
        .hero-feature:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(44, 95, 111, 0.4); }
        .hero-feature-icon { font-size: 4.5em; margin-bottom: 25px; color: white; display: flex; justify-content: center; }
        .hero-feature-icon svg { width: 80px; height: 80px; }
        .hero-feature h3 { color: white; font-size: 2.2em; margin-bottom: 20px; font-weight: 700; }
        .hero-feature p { color: rgba(255, 255, 255, 0.95); font-size: 1.15em; line-height: 1.8; max-width: 700px; margin: 0 auto; }

        /* Feature Grid - Unified Container */
        .features-wrapper { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
        .features-grid { display: contents; }
        .feature-item { text-align: center; background: #FFFFFF; border: 2px solid #E5E7EB; border-radius: 15px; padding: 40px 30px; transition: all 0.3s ease; height: 100%; }
        .feature-item:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(44, 95, 111, 0.15); border-color: #2C5F6F; }
        .feature-item-icon { font-size: 3em; margin-bottom: 20px; color: #2C5F6F; display: flex; justify-content: center; }
        .feature-item-icon svg { width: 56px; height: 56px; }
        .feature-item h3 { color: #2D3748; font-size: 1.4em; margin-bottom: 15px; font-weight: 600; }
        .feature-item p { color: #6B7280; line-height: 1.7; font-size: 1em; }

        /* Footer */
        .footer { background: #FFFFFF; border-radius: 15px; padding: 40px; margin-top: 50px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); border: 1px solid #E5E7EB; }
        .footer p { color: #6B7280; margin-bottom: 10px; }
        .footer a { color: #2C5F6F; text-decoration: none; font-weight: 600; }
        .footer a:hover { color: #1F4A56; text-decoration: underline; }
        
        /* Tablet Responsive */
        @media (max-width: 1024px) {
            .features-wrapper { grid-template-columns: repeat(2, 1fr); }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .navbar { padding: 10px 15px; }
            .logo { height: 32px; }
            .nav-right { gap: 10px; }
            .search-box { min-width: 50px; padding: 6px 8px; }
            .search-box svg { width: 16px; height: 16px; margin-right: 4px; }
            .search-box input { font-size: 0.8em; }
            .hero-section { padding: 25px 20px; }
            .hero-section h1 { font-size: 2em; }
            .hero-section .tagline { font-size: 1.1em; }
            .calc-grid { grid-template-columns: 1fr; }
            .features-wrapper { grid-template-columns: 1fr; }
            .features-section { padding: 40px 25px; }
            .features-section h2 { font-size: 2em; }
            .hero-feature-container { margin-bottom: 40px; }
            .hero-feature { padding: 40px 25px; }
            .hero-feature-icon svg { width: 60px; height: 60px; }
            .hero-feature h3 { font-size: 1.8em; }
            .hero-feature p { font-size: 1em; }
            .feature-item { padding: 30px 20px; }
            .mobile-menu-content { width: 280px; right: -280px; }
            .hamburger { margin-left: 5px; padding: 3px; }
            .hamburger span { width: 24px; }
            .ai-chat-section { padding: 30px 20px; }
            .ai-chat-section h2 { font-size: 1.8em; }
            .ai-chat-response-area { max-height: 400px; padding: 20px; }
            .ai-chat-input-area { flex-direction: column; }
            .ai-chat-input-area button { width: 100%; }
            .ai-chat-actions-area { flex-direction: column; }
            .ai-action-btn { width: 100%; }
            .ai-chat-input-area { flex-direction: column; }
            .ai-chat-input-area button { width: 100%; }
            .ai-action-buttons { flex-direction: column; }
            .ai-action-btn { justify-content: center; }
        }
        @media (max-width: 400px) {
            .navbar { padding: 8px 12px; }
            .logo { height: 28px; }
            .nav-right { gap: 8px; }
            .search-box { min-width: 40px; padding: 5px 6px; }
            .hamburger span { width: 22px; }
            .hero-section { padding: 20px 15px; }
            .hero-section h1 { font-size: 1.6em; }
            .hero-section .tagline { font-size: 1em; }
            .ai-chat-section { padding: 25px 15px; }
            .features-section { padding: 30px 15px; }
            .features-section h2 { font-size: 1.6em; }
            .hero-feature { padding: 30px 20px; }
            .hero-feature h3 { font-size: 1.5em; }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">
                <img src="50F4465B-4D0A-459B-AAD8-B367AAEEF636.jpg" alt="ZenCalcs Logo" class="logo">
            </a>

            <div class="nav-right">
                <div class="search-box" onclick="openSearchInMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <input type="text" placeholder="Search Calculator" readonly onclick="openSearchInMenu()">
                </div>
                <div class="hamburger" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Slide-out Menu -->
    <div class="mobile-menu" id="mobileMenu" onclick="closeMobileMenu()">
        <div class="mobile-menu-content" onclick="event.stopPropagation()">
            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Search calculators..." onkeyup="filterCalculators()">
            </div>

            <!-- AI Calculator -->
            <a href="index.html" class="mobile-menu-item" style="background: linear-gradient(135deg, #2C5F6F 0%, #1E40AF 100%); color: white; font-weight: 700; border-left-color: #1E40AF; box-shadow: 0 4px 12px rgba(44, 95, 111, 0.3); margin-bottom: 15px;">âš¡ AI Calculator Assistant</a>

            <div class="category-divider"></div>

            <!-- Financial Calculators -->
            <div class="category-header">Financial</div>
            <a href="mortgage-calculator.html" class="mobile-menu-item">Mortgage Calculator</a>
            <a href="loan-calculator.html" class="mobile-menu-item">Loan Calculator</a>
            <a href="auto-loan-calculator.html" class="mobile-menu-item">Auto Loan Calculator</a>
            <a href="compound-interest.html" class="mobile-menu-item">Savings Calculator</a>
            <a href="payment-calculator.html" class="mobile-menu-item">Payment Calculator</a>
            <a href="retirement-calculator.html" class="mobile-menu-item">Retirement Calculator</a>
            <a href="amortization-calculator.html" class="mobile-menu-item">Amortization Calculator</a>
            <a href="investment-calculator.html" class="mobile-menu-item">Investment Calculator</a>
            <a href="inflation-calculator.html" class="mobile-menu-item">Inflation Calculator</a>
            <a href="roi-calculator.html" class="mobile-menu-item">ROI Calculator</a>
            <a href="savings-calculator.html" class="mobile-menu-item">Income Tax Calculator</a>

            <div class="category-divider"></div>

            <!-- Fitness & Health -->
            <div class="category-header">Fitness & Health</div>
            <a href="bmi-calculator.html" class="mobile-menu-item">BMI Calculator</a>
            <a href="calorie-calculator.html" class="mobile-menu-item">Calorie Calculator</a>
            <a href="body-fat-calculator.html" class="mobile-menu-item">Body Fat Calculator</a>
            <a href="bmr-calculator.html" class="mobile-menu-item">BMR Calculator</a>
            <a href="ideal-weight-calculator.html" class="mobile-menu-item">Ideal Weight Calculator</a>
            <a href="pace-calculator.html" class="mobile-menu-item">Pace Calculator</a>
            <a href="pregnancy-calculator.html" class="mobile-menu-item">Pregnancy Calculator</a>
            <a href="due-date-calculator.html" class="mobile-menu-item">Due Date Calculator</a>
            <a href="macro-calculator.html" class="mobile-menu-item">Macro Calculator</a>
            <a href="body-type-calculator.html" class="mobile-menu-item">Body Type Calculator</a>

            <div class="category-divider"></div>

            <!-- Math Calculators -->
            <div class="category-header">Math</div>
            <a href="scientific-calculator.html" class="mobile-menu-item">Scientific Calculator</a>
            <a href="fraction-calculator.html" class="mobile-menu-item">Fraction Calculator</a>
            <a href="percentage-calculator.html" class="mobile-menu-item">Percentage Calculator</a>
            <a href="random-number-generator.html" class="mobile-menu-item">Random Number Generator</a>
            <a href="triangle-calculator.html" class="mobile-menu-item">Triangle Calculator</a>
            <a href="standard-deviation-calculator.html" class="mobile-menu-item">Standard Deviation Calculator</a>
            <a href="square-root-calculator.html" class="mobile-menu-item">Square Root Calculator</a>
            <a href="exponent-calculator.html" class="mobile-menu-item">Exponent Calculator</a>
            <a href="log-calculator.html" class="mobile-menu-item">Log Calculator</a>
            <a href="algebra-calculator.html" class="mobile-menu-item">Algebra Calculator</a>

        </div>
    </div>

    <div class="container">
        <div class="hero-section">
            <h1>Stop Juggling Calculator Apps</h1>
            <p class="tagline">All your essential calculators, beautifully organized</p>
        </div>

        <!-- AI Chat Interface -->
        <div class="ai-chat-section">
            <h2>AI Calculator Assistant</h2>
            <p class="subtitle">Ask any calculation question - financial, health, math, or conversions</p>

            <div class="ai-chat-container">
                <div class="ai-chat-response-area" id="responseArea">
                    <div class="ai-empty-state">
                        <img src="android-chrome-192x192.png" alt="ZenCalcs" style="width: 40px; height: 40px; margin-bottom: 10px;">
                        <h3>Ready to Help</h3>
                        <p>Ask me anything - I can handle financial calculations, health metrics, math problems, and more!</p>
                    </div>
                </div>

                <div class="ai-chat-input-area">
                    <textarea
                        id="aiQuestion"
                        placeholder="What would you like me to calculate?"
                        rows="2"
                    ></textarea>
                    <button onclick="askAI()">Ask AI</button>
                </div>

                <div class="ai-chat-actions-area">
                    <button class="ai-action-btn primary" onclick="generateReport()">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        Generate Report
                    </button>
                    <button class="ai-action-btn secondary" onclick="clearChat()">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        Start New Calculation
                    </button>
                </div>
            </div>
        </div>

        <div class="features-section">
            <h2>Why Choose ZenCalcs?</h2>

            <!-- Unified Grid Container for Perfect Alignment -->
            <div class="features-wrapper">
                <!-- Hero Feature - AI Powered (spans full width) -->
                <div class="hero-feature">
                    <div class="hero-feature-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                    </div>
                    <h3>AI-Powered Intelligence</h3>
                    <p>Ask questions naturally and get instant, accurate calculations with detailed explanations. Our Claude-powered AI understands context and provides personalized insights for all your calculation needs.</p>
                </div>

                <!-- Supporting Features Grid (6 cards in 3x2) -->
                <div class="features-grid">
                    <div class="feature-item">
                        <div class="feature-item-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                            </svg>
                        </div>
                        <h3>Interactive Charts</h3>
                        <p>Beautiful visualizations that make your data easy to understand.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-item-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <h3>Fast & Free</h3>
                        <p>No signup required. Completely free forever.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-item-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <h3>Mobile Friendly</h3>
                        <p>Perfect experience on any device.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-item-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                        </div>
                        <h3>Detailed Analysis</h3>
                        <p>Comprehensive tables and breakdowns for complete understanding.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-item-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                            </svg>
                        </div>
                        <h3>Professional Quality</h3>
                        <p>Enterprise-grade calculators for personal use.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-item-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                            </svg>
                        </div>
                        <h3>Smart Insights</h3>
                        <p>Get personalized recommendations with every calculation.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2025 ZenCalcs. All rights reserved.</p>
            <p>Professional financial calculators with no signup required.</p>
        </div>
    </div>

    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        function closeMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.remove('active');
            hamburger.classList.remove('active');
        }

        function openSearchInMenu() {
            const menu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.add('active');
            hamburger.classList.add('active');
            setTimeout(() => {
                document.getElementById('searchInput').focus();
            }, 300);
        }

        // Enhanced calculator metadata for better search
        const calculatorData = {
            'Mortgage Calculator': 'home loan house payment monthly amortization interest principal property real estate housing',
            'Loan Calculator': 'personal auto student debt borrow money payment interest rate term',
            'Investment Calculator': 'stocks bonds portfolio returns compound growth wealth savings interest earnings',
            'Retirement Calculator': '401k ira pension savings future nest egg social security age withdraw',
            'Compound Interest': 'growth savings investment returns earnings compound annual rate time value',
            'Savings Calculator': 'goals emergency fund money deposit growth interest target future',
            'ROI Calculator': 'return investment profit loss percentage gain revenue business',
            'Budget Calculator': 'income expenses spending money management monthly track bills savings',
            'Debt Payoff': 'credit card snowball avalanche payment strategy eliminate balance owe',
            'Payment Calculator': 'installment monthly loan amortization schedule principal interest',
            'Auto Loan Calculator': 'car vehicle financing payment interest down trade lease',
            'Inflation Calculator': 'purchasing power cost living cpi price increase decrease value',
            'Amortization Calculator': 'loan schedule payment breakdown principal interest balance equity',
            'Salary Calculator': 'income wage paycheck hourly annual gross net tax take home',
            'BMI Calculator': 'body mass index weight height obesity overweight underweight health fitness',
            'BMR Calculator': 'basal metabolic rate calories burn rest metabolism energy daily',
            'Body Fat Calculator': 'percentage lean mass composition health fitness measurements',
            'Calorie Calculator': 'daily intake tdee lose gain maintain weight diet nutrition energy',
            'Macro Calculator': 'macronutrients protein carbs fat diet nutrition ratio percentage grams',
            'Ideal Weight Calculator': 'target healthy bmi height frame size goal body',
            'Body Type Calculator': 'somatotype ectomorph mesomorph endomorph physique build frame',
            'Due Date Calculator': 'pregnancy baby conception delivery expected birth weeks trimester',
            'Pregnancy Calculator': 'weeks months trimester conception delivery due date fetus development',
            'Pace Calculator': 'running walking speed time distance mile kilometer marathon training',
            'Percentage Calculator': 'percent fraction decimal ratio proportion increase decrease of',
            'Scientific Calculator': 'math functions trigonometry logarithm exponent sin cos tan sqrt power',
            'Fraction Calculator': 'add subtract multiply divide simplify reduce numerator denominator',
            'Square Root Calculator': 'radical sqrt root power exponent inverse mathematics',
            'Standard Deviation Calculator': 'statistics variance mean average data set distribution spread',
            'Random Number Generator': 'random generator rng lottery pick numbers raffle dice roll unique duplicate sort',
            'Triangle Calculator': 'geometry sides angles area perimeter law sines cosines pythagorean theorem',
            'Exponent Calculator': 'power base exponential raise scientific notation square cube',
            'Log Calculator': 'logarithm natural ln log10 base e common binary log2 exponential inverse',
            'Algebra Calculator': 'equation solve linear quadratic polynomial roots discriminant parabola vertex'
        };

        function filterCalculators() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const items = document.querySelectorAll('.mobile-menu-item');
            const headers = document.querySelectorAll('.category-header');
            const dividers = document.querySelectorAll('.category-divider');

            // Calculate relevance scores for each calculator
            const scoredItems = [];

            items.forEach(item => {
                const calcName = item.textContent.trim();
                const text = calcName.toLowerCase();
                const keywords = calculatorData[calcName] || '';

                let score = 0;

                if (!searchTerm) {
                    score = 100; // Show all when search is empty
                } else {
                    // Exact name match gets highest score
                    if (text === searchTerm) {
                        score = 1000;
                    }
                    // Name starts with search term
                    else if (text.startsWith(searchTerm)) {
                        score = 500;
                    }
                    // Name contains search term
                    else if (text.includes(searchTerm)) {
                        score = 250;
                    }
                    // Keywords contain search term
                    else if (keywords.includes(searchTerm)) {
                        score = 100;
                    }
                    // Partial word match in keywords
                    else {
                        const searchWords = searchTerm.split(' ');
                        searchWords.forEach(word => {
                            if (word.length > 2) {
                                if (text.includes(word)) score += 50;
                                if (keywords.includes(word)) score += 25;
                            }
                        });
                    }
                }

                scoredItems.push({ item, score, calcName });
            });

            // Sort by score and display
            scoredItems.sort((a, b) => b.score - a.score);

            scoredItems.forEach(({ item, score }) => {
                if (score > 0) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });

            // Hide/show category headers based on visible items
            if (searchTerm) {
                headers.forEach(header => header.style.display = 'none');
                dividers.forEach(divider => divider.style.display = 'none');
            } else {
                headers.forEach(header => header.style.display = 'block');
                dividers.forEach(divider => divider.style.display = 'block');
            }
        }
    </script>

    <!-- AI Chat JavaScript -->
    <script>
        let conversationHistory = [];

        async function askAI() {
            const questionInput = document.getElementById('aiQuestion');
            const responseArea = document.getElementById('responseArea');
            const question = questionInput.value.trim();

            if (!question) return;

            // Clear input
            questionInput.value = '';

            // Remove empty state if present
            const emptyState = responseArea.querySelector('.ai-empty-state');
            if (emptyState) {
                emptyState.remove();
            }

            // Add user message
            addMessage('user', question);

            // Show loading indicator
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'ai-message loading';
            loadingDiv.id = 'loadingIndicator';
            loadingDiv.innerHTML = `
                <div class="ai-message-header">
                    <img src="android-chrome-192x192.png" alt="ZenCalcs" style="width: 24px; height: 24px;">
                    <h4>AI Assistant</h4>
                </div>
                <div class="ai-message-content" style="opacity: 0.6;">
                    <div class="typing-indicator">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            responseArea.appendChild(loadingDiv);
            responseArea.scrollTop = responseArea.scrollHeight;

            try {
                // Call AI API
                const response = await fetch('/.netlify/functions/ai-chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: question,
                        conversationHistory: conversationHistory
                    })
                });

                if (!response.ok) {
                    throw new Error('Failed to get response');
                }

                const data = await response.json();

                // Remove loading indicator
                const loader = document.getElementById('loadingIndicator');
                if (loader) loader.remove();

                // Update conversation history
                conversationHistory.push(
                    { role: 'user', content: question },
                    { role: 'assistant', content: data.response }
                );

                // Add AI response
                addMessage('assistant', data.response);

            } catch (error) {
                console.error('Error:', error);
                const loader = document.getElementById('loadingIndicator');
                if (loader) loader.remove();

                addMessage('error', 'Sorry, I encountered an error. Please try again later.');
            }
        }

        function addMessage(role, content) {
            const responseArea = document.getElementById('responseArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `ai-message ${role}`;

            let headerHTML = '';
            if (role === 'user') {
                headerHTML = `
                    <div class="ai-message-header">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        <h4>You</h4>
                    </div>
                `;
            } else if (role === 'assistant') {
                headerHTML = `
                    <div class="ai-message-header">
                        <img src="android-chrome-192x192.png" alt="ZenCalcs" style="width: 24px; height: 24px;">
                        <h4>AI Assistant</h4>
                    </div>
                `;
            } else if (role === 'error') {
                headerHTML = `
                    <div class="ai-message-header">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        <h4>Error</h4>
                    </div>
                `;
            }

            messageDiv.innerHTML = `
                ${headerHTML}
                <div class="ai-message-content">
                    ${role === 'user' || role === 'error' ? escapeHtml(content) : formatAnswer(content)}
                </div>
            `;

            responseArea.appendChild(messageDiv);
            responseArea.scrollTop = responseArea.scrollHeight;
        }

        function formatAnswer(text) {
            // Enhanced formatting with headings, subheadings, lists
            let formatted = text
                // Convert ### Subheadings to h4
                .replace(/^### (.+)$/gm, '<h4 class="message-subheading">$1</h4>')
                // Convert ## Headings to h3
                .replace(/^## (.+)$/gm, '<h3 class="message-heading">$1</h3>')
                // Convert # Main Headings to h3
                .replace(/^# (.+)$/gm, '<h3 class="message-heading">$1</h3>')
                // Convert **bold** to strong
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                // Convert bullet points
                .replace(/^- (.+)$/gm, '<div class="message-bullet">â€¢ $1</div>')
                // Convert numbered lists
                .replace(/^\d+\. (.+)$/gm, '<div class="message-numbered">$1</div>')
                // Convert line breaks
                .replace(/\n/g, '<br>');

            return formatted;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        async function generateReport() {
            if (conversationHistory.length === 0) {
                alert('There are no calculations to report yet. Please start a conversation first.');
                return;
            }

            console.log('Starting report generation...');
            console.log('Conversation history:', conversationHistory);

            // Load html2pdf library if not already loaded
            if (typeof html2pdf === 'undefined') {
                console.log('Loading html2pdf library...');
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js';
                script.onload = async () => {
                    console.log('html2pdf library loaded successfully');
                    await requestReportFromAI();
                };
                script.onerror = (error) => {
                    console.error('Failed to load html2pdf library:', error);
                    addMessage('error', 'Failed to load PDF library. Please check your internet connection and try again.');
                };
                document.head.appendChild(script);
            } else {
                console.log('html2pdf library already loaded');
                await requestReportFromAI();
            }
        }

        async function requestReportFromAI() {
            console.log('Requesting report from AI...');

            // Show loading message
            addMessage('assistant', 'Generating your calculation report...');

            try {
                const response = await fetch('/.netlify/functions/ai-chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: 'Please generate a comprehensive calculation report based on our conversation. Include: 1) A title "ZenCalcs Calculation Report", 2) Today\'s date, 3) Professional executive summary, 4) All inputs provided, 5) All calculation results with clear sections and headings, 6) Key insights and recommendations. Format with ## for main headings and ### for subheadings. Make it professional and suitable for PDF export.',
                        conversationHistory: conversationHistory
                    })
                });

                console.log('API response status:', response.status);

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('API error response:', errorText);
                    throw new Error(`API returned ${response.status}: ${errorText}`);
                }

                const data = await response.json();
                console.log('Report data received:', data);

                // Check if html2pdf is available
                if (typeof html2pdf === 'undefined') {
                    throw new Error('html2pdf library is not loaded');
                }

                // Create PDF
                console.log('Creating PDF...');
                createPDF(data.response);

                // Show success message
                addMessage('assistant', 'ðŸ“Š Your calculation report has been generated and downloaded as a PDF file.');

            } catch (error) {
                console.error('Error generating report:', error);
                console.error('Error details:', {
                    message: error.message,
                    stack: error.stack
                });
                addMessage('error', `Sorry, I encountered an error generating the report: ${error.message}`);
            }
        }

        function createPDF(reportContent) {
            try {
                console.log('Creating PDF with content length:', reportContent.length);

                // Convert markdown to formatted HTML
                const formattedContent = formatReportForPDF(reportContent);
                console.log('Content formatted for PDF');

                // Create temporary container
                const pdfContainer = document.createElement('div');
                pdfContainer.style.padding = '40px';
                pdfContainer.style.fontFamily = 'Arial, sans-serif';
                pdfContainer.style.fontSize = '12px';
                pdfContainer.style.lineHeight = '1.6';
                pdfContainer.style.color = '#2D3748';
                pdfContainer.innerHTML = `
                    <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2C5F6F; padding-bottom: 20px;">
                        <h1 style="color: #2C5F6F; font-size: 24px; margin: 0;">ZenCalcs</h1>
                        <p style="color: #1E40AF; font-size: 14px; margin: 5px 0;">Calculation Report</p>
                    </div>
                    ${formattedContent}
                    <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #E5E7EB; text-align: center; font-size: 10px; color: #6B7280;">
                        <p>Generated by ZenCalcs AI Assistant â€¢ https://zencalcs.com</p>
                    </div>
                `;

                console.log('PDF container created');

                // PDF options
                const opt = {
                    margin: 0.5,
                    filename: `ZenCalcs-Report-${new Date().toISOString().split('T')[0]}.pdf`,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true },
                    jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
                };

                console.log('Generating PDF with options:', opt);

                // Generate and download
                html2pdf().set(opt).from(pdfContainer).save()
                    .then(() => {
                        console.log('PDF generated and downloaded successfully');
                    })
                    .catch((error) => {
                        console.error('Error during PDF generation:', error);
                        throw error;
                    });

            } catch (error) {
                console.error('Error in createPDF function:', error);
                throw error;
            }
        }

        function formatReportForPDF(text) {
            let formatted = text
                .replace(/^## (.+)$/gm, '<h2 style="color: #2C5F6F; font-size: 18px; margin: 20px 0 10px 0; border-bottom: 2px solid #E5E7EB; padding-bottom: 5px;">$1</h2>')
                .replace(/^### (.+)$/gm, '<h3 style="color: #1E40AF; font-size: 14px; margin: 15px 0 8px 0; font-weight: 600;">$1</h3>')
                .replace(/\*\*(.*?)\*\*/g, '<strong style="color: #2C5F6F;">$1</strong>')
                .replace(/^- (.+)$/gm, '<div style="margin: 5px 0 5px 20px;">â€¢ $1</div>')
                .replace(/^\d+\. (.+)$/gm, '<div style="margin: 5px 0 5px 20px;">$1</div>')
                .replace(/\n\n/g, '</p><p style="margin: 10px 0;">')
                .replace(/\n/g, '<br>');

            return `<div style="line-height: 1.6;">${formatted}</div>`;
        }

        function clearChat() {
            if (conversationHistory.length > 0) {
                if (!confirm('Are you sure you want to start a new calculation? This will clear the current conversation.')) {
                    return;
                }
            }

            conversationHistory = [];
            document.getElementById('responseArea').innerHTML = `
                <div class="ai-empty-state">
                    <img src="android-chrome-192x192.png" alt="ZenCalcs" style="width: 40px; height: 40px; margin-bottom: 10px;">
                    <h3>Ready to Help</h3>
                    <p>Ask me anything - I can handle financial calculations, health metrics, math problems, and more!</p>
                </div>
            `;
        }

        // Allow Enter key to submit
        document.addEventListener('DOMContentLoaded', function() {
            const textarea = document.getElementById('aiQuestion');
            textarea.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    askAI();
                }
            });
        });
    </script>
</body>
</html>
